{% load static %}

<!DOCTYPE html>
<link rel="shortcut icon" type="image/png" href="{% static '/production/images/recon.ico' %}">
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <!-- Meta, title, CSS, favicons, etc. -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title> Home | RECON Remastered</title>

    <!-- Bootstrap -->
    <link href="{% static '/vendors/bootstrap/dist/css/bootstrap.min.css' %}" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="{% static '/vendors/font-awesome/css/font-awesome.min.css' %}" rel="stylesheet">
    <!-- NProgress -->
    <link href="{% static '/vendors/nprogress/nprogress.css' %}" rel="stylesheet">
    <!-- iCheck -->
    <link href="{% static '/vendors/iCheck/skins/flat/green.css' %}" rel="stylesheet">
    <!-- More Icons -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <!-- bootstrap-daterangepicker -->
    <link href="{% static '/vendors/bootstrap-daterangepicker/daterangepicker.css' %}" rel="stylesheet">
    <!-- bootstrap-datetimepicker -->
    <link href="{% static '/vendors/bootstrap-datetimepicker/build/css/bootstrap-datetimepicker.css' %}" rel="stylesheet">

    <!-- Custom Theme Style -->
    <link href="{% static '/build/css/custom.min.css' %}" rel="stylesheet">
	
	<script>
		var staticlink = {% static '' %};
	</script>
  </head>

  <body class="nav-md">
    <div class="container body">
      <div class="main_container">

        <!-- top navigation -->
        <div class="top_nav">
          <div class="nav_menu">
            <nav>
              <div class="nav toggle">
              	<div class="site_logo">
              		<img src="{% static '/production/images/logo4-sm.png' %}" class="nav-img-logo2" id="reconLogo2">
              		<img src="{% static '/production/images/logo4.png' %}" class="nav-img-logo" id="reconLogo">
	                <div class="buttonPadding">
										<span data-toggle="modal" data-target="#saveWork">	
											<button class="btn btn-default" type="button" data-toggle="tooltip" data-placement="bottom" title="Save Topology"><i class="fa fa-save"></i></button>
										</span>
										<span data-toggle="modal" data-target="#loadFile">
			                <button class="btn btn-default" type="button" data-toggle="tooltip" data-placement="bottom" title="Open File"><i class="fa fa-download"></i></button>
			              </span>
										<span data-toggle="modal" data-target="#reserveDevice">
		                	<button class="btn btn-default" type="button" data-toggle="tooltip" data-placement="bottom" title="Reserve Device"><i class="fa fa-calendar"></i></button>
		                </span>
									</div>              		
              	</div>

              	<ul class="nav-logout" >
									<li> {{ current_user.username }}
	              	<a data-toggle="tooltip" data-placement="top" title="Logout" href="/logout/">               
		                <span id="signout" class="fa fa-sign-out"></span>
		              </a>
		              </li>
	              </ul>
              </div>
            </nav>
          </div>
        </div>
        <!-- /top navigation -->

        <!-- page content -->
        <div class="right_col" role="main">
        	<div class="">
	      		<div class="clearfix"></div>

		        <div class="row">
							<div class="col-md-12 col-sm-12 col-xs-12">
								<div class="x_panel" style="padding-top: 5px;padding-bottom: 5px;">
									<div class="x_content" id="Content">								
										<div class="canvas-position">                    
											<div id="DivWorkspace" style="border: 1px solid #e5e5e5; overflow: auto; background-color: #000;">
												<canvas id="Workspace" style="background-color: #fff;" ondrop="EvtOnDrop(event)" ondragover="EvtOnDragOver(event)" onclick="EvtOnDraw(event)"></canvas>
											</div>
										</div>
										<div class="tab-position">
		                  <div class="x_content" style="padding: 0; height: 300px;">
		                    <div class="col-xs-3" style="padding-left: 0;">
		                      <!-- required for floating -->
		                      <!-- Nav tabs -->
		                      <ul class="nav nav-tabs tabs-left" style="height: 450px; border:0;">
		                        <li class="active"><a href="#devicesPanel" data-toggle="tab" id="devicesTab">Devices</a>
		                        </li>
		                        <li><a href="#routerPanel" data-toggle="tab" id="routerTab">Router 1</a>
		                        </li>
		                        <li><a href="#switchPanel" data-toggle="tab" id="switchTab">Switch 1</a>
		                        </li>
		                        <li><a href="#terminalPanel" data-toggle="tab" id="terminalTab">Terminal 1</a>
		                        </li>
		                      </ul>
		                    </div>

		                    <div class="col-xs-9" style="padding: 0;">
		                      <div class="tab-content">
		                        <div class="tab-pane active" id="devicesPanel">
															<ul class="device-list"> <!-- style="column-count: 3;" -->
																<li>
																	<img class="deviceIcons" id="DeviceRouter" src="{% static '/production/images/routerIcon.png' %}" onclick="AddToWorkspace(this)" draggable="true" ondragstart="EvtOnDragStart(this)" data-toggle="tooltip" data-placement="bottom" title="Router">
																</li>
																<li>
																	<img class="deviceIcons" id="DeviceSwitch" src="{% static '/production/images/switchIcon.png' %}" onclick="AddToWorkspace(this)" draggable="true" ondragstart="EvtOnDragStart(this)" data-toggle="tooltip" data-placement="bottom" title="Switch">
																</li>
																<li>
																	<img class="deviceIcons" id="DeviceTerminal" src="{% static '/production/images/terminalIcon.png' %}" onclick="AddToWorkspace(this)" draggable="true" ondragstart="EvtOnDragStart(this)" data-toggle="tooltip" data-placement="bottom" title="Terminal">
																</li>
																<li>
																	<img class="deviceIcons" id="DeviceRouter" src="{% static '/production/images/routerIcon.png' %}" onclick="AddToWorkspace(this)" draggable="true" ondragstart="EvtOnDragStart(this)" data-toggle="tooltip" data-placement="bottom" title="Router">
																</li>
																<li>
																	<img class="deviceIcons" id="DeviceSwitch" src="{% static '/production/images/switchIcon.png' %}" onclick="AddToWorkspace(this)" draggable="true" ondragstart="EvtOnDragStart(this)" data-toggle="tooltip" data-placement="bottom" title="Switch">
																</li>
																<li>
																	<img class="deviceIcons" id="DeviceTerminal" src="{% static '/production/images/terminalIcon.png' %}" onclick="AddToWorkspace(this)" draggable="true" ondragstart="EvtOnDragStart(this)" data-toggle="tooltip" data-placement="bottom" title="Terminal">
																</li>
																<li>
																	<img class="deviceIcons" id="DeviceRouter" src="{% static '/production/images/routerIcon.png' %}" onclick="AddToWorkspace(this)" draggable="true" ondragstart="EvtOnDragStart(this)" data-toggle="tooltip" data-placement="bottom" title="Router">
																</li>
																<li>
																	<img class="deviceIcons" id="DeviceSwitch" src="{% static '/production/images/switchIcon.png' %}" onclick="AddToWorkspace(this)" draggable="true" ondragstart="EvtOnDragStart(this)" data-toggle="tooltip" data-placement="bottom" title="Switch">
																</li>
																<li>
																	<img class="deviceIcons" id="DeviceTerminal" src="{% static '/production/images/terminalIcon.png' %}" onclick="AddToWorkspace(this)" draggable="true" ondragstart="EvtOnDragStart(this)" data-toggle="tooltip" data-placement="bottom" title="Terminal">
																</li>																
															</ul>
															<ul class="cable-list" style="padding-left:0">
																<li><img class="deviceIcons" id="CableLan" src="{% static '/production/images/lan.png' %}" draggable="false" onclick="EvtOnClick(this)" data-toggle="tooltip" data-placement="bottom" title="LAN"></li>
																<li><img class="deviceIcons" id="CableWan" src="{% static '/production/images/wan.png' %}" draggable="false" onclick="EvtOnClick(this)" data-toggle="tooltip" data-placement="bottom" title="WAN"></li>
																<li><img class="deviceIcons" id="CableConsole" src="{% static '/production/images/console.png' %}" draggable="false" onclick="EvtOnClick(this)" data-toggle="tooltip" data-placement="bottom" title="Console"></li>
																<li><img class="deviceIcons" id="CableConsole" src="{% static '/production/images/delete.png' %}" draggable="false" onclick="remove();" data-toggle="tooltip" data-placement="bottom" title="Delete device"></li>
															</ul>
		                        </div>
								
								
		                        <div class="tab-pane" id="routerPanel">
		                        	<textarea class="config" id="routerConfig" readonly> {{ routerConfig }} </textarea>
	                        	  <div class="form-group command-group">
	                        	  	<div class="col-sm-12 input-group">
				                        	<input type="text" class="form-control" placeholder="Input command here" style="padding:5px;" id="routerInput">
					                        <span class="input-group-btn">
					                        	<button class="btn btn-info" onclick="routerSend()">Add</button>
					                        </span>
				                    </div>
				                      </div>
		                        </div>
								
								
		                        <div class="tab-pane" id="switchPanel">
		                        	<textarea class="config" id="switchConfig" readonly>SW1#show running-config
																Building configuration...
																...
																end</textarea>
	                        	  <div class="form-group command-group">
	                        	  	<div class="col-sm-12 input-group">
				                        	<input type="text" class="form-control" placeholder="Input command here" required="required" style="padding:5px;" id="switchCmd">
					                        <span class="input-group-btn">
					                        	<button type="button" class="btn btn-info">Add</button>
					                        </span>
				                        </div>
				                      </div>
		                        </div>
		                        <div class="tab-pane" id="terminalPanel">
		                        	<textarea class="config" id="terminalConfig" readonly>PC1#show running-config
																Building configuration...
																...
																end</textarea>
	                        	  <div class="form-group command-group">
	                        	  	<div class="col-sm-12 input-group">
				                        	<input type="text" class="form-control" placeholder="Input command here" required="required" style="padding:5px;" id="terminalCmd">
					                        <span class="input-group-btn">
					                        	<button type="button" class="btn btn-info">Add</button>
					                        </span>
				                        </div>
				                      </div>
		                        </div>
		                      </div>
		                    </div>                   
		                  </div>

																			
										</div>

										<div id="menu-ports"> 
											<ul class="custom-menu">
											   <li data-action="first">First thing</li>
											</ul>
										</div>	

									</div>
								</div>
							</div>
		        </div>
        	</div>
        </div>
        <!-- /page content -->
      </div>
    </div>

    <!-- CONFIRM DELETE -->
    <div id="dialogoverlay">
			<div id="dialogbox">
			  <div class="modal-content">
					<div id="dialogboxhead"></div>
					<div id="dialogboxbody"></div>
					<div id="dialogboxfoot"></div>
			  </div>
			</div>
		</div>
		<!-- CONFIRM DELETE -->

    <!--start SAVE -->
    <div id="saveWork" class="modal fade" role="dialog" aria-hidden="true" style="padding-top: 100px">
      <div class="modal-dialog">
        <div class="modal-content">
        	<div class="modal-header" style="height: 50px;">
        		<h3 style="display: inline;"><i class="fa fa-edit"></i> Save As</h3>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span>
            </button>            
          </div>
          <div class="modal-body">
            <div class="form-horizontal form-label-left">
            	<div class="form-group">
	              <label class="control-label col-md-3" for="filename">File name: 
	              </label>
	              <div class="col-md-7">
	              	<input type="text" id="saveTopology" class="form-control">
	              </div>
            	</div>
            </div>
          </div>              
          <div class="modal-footer">
            <button type="submit" class="btn btn-primary" onClick="saveTopology()">Save</button>
            <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
          </div>
        </div>
      </div>
    </div>
    <!-- end SAVE -->

    <!--start LOAD -->
    <div id="loadFile" class="modal fade" role="dialog" aria-hidden="true" style="padding-top: 100px">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header" style="height: 50px;">
            <h3 style="display: inline;"><i class="fa fa-download"></i> Open</h3>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span>
            </button>  
          </div>
          <div class="modal-body">
            <div class="form-horizontal form-label-left">
            	<div class="form-group">
	              <label class="control-label col-md-3" for="filename">File name: 
	              </label>
	              <div class="col-md-7">
	              	<select id="topologyID" class="select2_single form-control" tabindex="-1">
                    <option></option>
					{% for topology in topologies %}
						<option value = {{ topology.pk }}>{{ topology.name }}</option>
					{% endfor %}
                  </select>
	              </div>
            	</div>
            </div>
          </div>              
          <div class="modal-footer">
            <button type="submit" class="btn btn-primary" onClick="loadTopology()">Open</button>
            <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
          </div>
        </div>
      </div>
    </div>
    <!-- end LOAD -->

    <!--start RESERVE -->
    <div id="reserveDevice" class="modal fade" role="dialog" aria-hidden="true" style="padding-top: 90px">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h3 style="display: inline;"><i class="fa fa-calendar"></i> Reservation Form</h3>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span>
            </button>  
          </div>
          <div class="modal-body">
            <div class="form-horizontal form-label-left">
              <h2>Available devices:</h2>
              <table class="table-width table table-striped jambo_table">
                <thead>
                  <tr>
                    <th style="width: 33%">Router</th>
                    <th style="width: 33%">Switch</th>
                    <th style="width: 33%">Terminal</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="a-center ">
                    	<div class="checkbox">
                        <label style="padding-left: 0">
                          <input type="checkbox" class="flat"> Router1
                        </label>
                      </div>
                    </td>
                    <td>
                    	<div class="checkbox">
                        <label style="padding-left: 0">
                          <input type="checkbox" class="flat"> Switch1
                        </label>
                      </div>
                    </td>
                    <td>
                    	<div class="checkbox">
                        <label style="padding-left: 0">
                          <input type="checkbox" class="flat"> Terminal1
                        </label>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td class="a-center ">
                    	<div class="checkbox">
                        <label style="padding-left: 0">
                          <input type="checkbox" class="flat"> Router2
                        </label>
                      </div>
                    </td>
                    <td>
                    	<div class="checkbox">
                        <label style="padding-left: 0">
                          <input type="checkbox" class="flat"> Switch2
                        </label>
                      </div>
                    </td>
                    <td>
                    	<div class="checkbox">
                        <label style="padding-left: 0">
                          <input type="checkbox" class="flat"> Terminal2
                        </label>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td class="a-center ">
                    	<div class="checkbox">
                        <label style="padding-left: 0">
                          <input type="checkbox" class="flat" disabled="disabled"> Router3
                        </label>
                      </div>
                    </td>
                    <td>
                    	<div class="checkbox">
                        <label style="padding-left: 0">
                          <input type="checkbox" class="flat" disabled="disabled"> Switch3
                        </label>
                      </div>
                    </td>
                    <td>
                    	<div class="checkbox">
                        <label style="padding-left: 0">
                          <input type="checkbox" class="flat" disabled="disabled"> Terminal3
                        </label>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
              <div class="form-group">
                <div class="col-md-6 col-sm-6 col-xs-12" style="padding-right: 0">
              		<label class="control-label col-md-3" style="width: 17%" for="datetimepicker6">Date</label>
                  <div class='input-group date' id='datetimepicker6'>
                    <span class="input-group-addon">
                      <span class="fa fa-calendar-o"></span>
                    </span>
                    <input type='text' class="form-control" />
                    <!-- <span class="input-group-addon">to</span> -->
                  </div>
                </div>   

                <div class="col-md-6 col-sm-6 col-xs-12" style="padding-left: 0">
                	<label class="control-label col-md-3" style="width: 12%" for="datetimepicker7">to</label>
                  <div class='input-group date' id='datetimepicker7'>
                    <input type='text' class="form-control" />
                    <span class="input-group-addon">
                      <span class="fa fa-calendar-o"></span>
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>              
          <div class="modal-footer">
            <button type="submit" class="btn btn-primary">Reserve</button>
            <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
          </div>
        </div>
      </div>
    </div>
    <!-- end RESERVE -->
	
	<script>
       // setInterval(function(){reloader();},1000);
       //
       // function reloader(){
       //     $.ajax({url: 'http://127.0.0.1:8000/getouts1', 
       //         success: function(result){
       //             var res = JSON.parse(result);
       //             document.getElementById('routerConfig').innerHTML = res['routerConfig'];              
       //         }
       //     });
		//	var textarea = document.getElementById('routerConfig');
		//	textarea.scrollTop = textarea.scrollHeight;
       // }
    </script>
	
	<script>
		var routerInput = document.getElementById("routerInput");
		routerInput.addEventListener("keydown", function (e) {
			if (e.keyCode == 13){
				routerSend();
				}
		});
		
		
		function routerSend(){
			var textarea = document.getElementById('routerConfig');
			textarea.scrollTop = textarea.scrollHeight;
			
			var command = document.getElementById("routerInput").value;
			$.ajax({url: 'http://127.0.0.1:8000/routerSend?routerInput=' + command,
			});
			document.getElementById("routerInput").value = "";
			
			textarea.scrollTop = textarea.scrollHeight;
		}
		
		function loadTopology(){
			var topologyID = document.getElementById('topologyID').value;
			window.location = "http://127.0.0.1:8000/loadTopology?topologyID=" + topologyID;
		}
		
		function saveTopology(){
			var topologyName = document.getElementById('saveTopology').value;
			$.ajax({url: "http://127.0.0.1:8000/saveTopology?topologyName=" + topologyName,
				});
			console.log("Called overwrite")
			window.setTimeout(saveDevices, 200);
		}
		
		function saveDevices(){
			var deviceArrayLength = Devices.length;
			for (var ctr = 0; ctr < deviceArrayLength; ctr++) {		
				$.ajax({url: "http://127.0.0.1:8000/saveDevice?deviceName=" + Devices[ctr].name + "&x=" + Devices[ctr].x + "&y=" + Devices[ctr].y,
				});
			}
			console.log("Called save")
		}
	</script>
	
    <!-- jQuery -->
    <script src="{% static '/vendors/jquery/dist/jquery.min.js' %}"></script>
    <!-- Bootstrap -->
    <script src="{% static '/vendors/bootstrap/dist/js/bootstrap.min.js' %}"></script>
    <!-- FastClick -->
    <script src="{% static '/vendors/fastclick/lib/fastclick.js' %}"></script>
    <!-- NProgress -->
    <script src="{% static '/vendors/nprogress/nprogress.js' %}"></script>
    <!-- validator -->
    <script src="{% static '/vendors/validator/validator.js' %}"></script>
    <!-- iCheck -->
    <script src="{% static '/vendors/iCheck/icheck.min.js' %}"></script>
    <!-- bootstrap-daterangepicker -->
    <script src="{% static '/vendors/moment/min/moment.min.js' %}"></script>
    <script src="{% static '/vendors/bootstrap-daterangepicker/daterangepicker.js' %}"></script>
    <!-- bootstrap-datetimepicker -->    
    <script src="{% static '/vendors/bootstrap-datetimepicker/build/js/bootstrap-datetimepicker.min.js' %}"></script>
    
    <!-- Custom Theme Scripts -->
    <script src="{% static '/build/js/custom.min.js' %}"></script>

     <!-- Initialize datetimepicker -->
    <script>  
     $('#datetimepicker6').datetimepicker({
      format: 'MM/DD/YYYY',
      useCurrent: true
    });
        
    $('#datetimepicker7').datetimepicker({
      format: 'MM/DD/YYYY',
      useCurrent: false
    });
    
    $("#datetimepicker6").on("dp.change", function(e) {
        $('#datetimepicker7').data("DateTimePicker").minDate(e.date);
    });
    
    $("#datetimepicker7").on("dp.change", function(e) {
        $('#datetimepicker6').data("DateTimePicker").maxDate(e.date);
    });
    </script>
	<!-- Jquery Scripts -->
	<script src="https://code.jquery.com/jquery-3.1.0.min.js"></script>
	
    <!-- RECON REMASTERED Script -->
    <!-- <script src="{% static '/production/js/recon.js' %}"></script> -->
	
	<!-- CANVASS SCRIPT -->
	<script>
	
			
	
	
	
			var Content = document.getElementById("Content");
			var CnvsWorkspace = document.getElementById("Workspace");
			var Workspace = CnvsWorkspace.getContext("2d");
			var Devspace = document.getElementById("Devspace");
			var Output = document.getElementById("Output");

			var DevRouter = { id:"DeviceRouter", name:"Router", image:"" + staticlink + "production/images/Router.png", height:38, width:64, count: 0};
			var DevSwitch = { id:"DeviceSwitch", name:"Switch", image:"" + staticlink + "production/images/Switch.png", height:38, width:64, count: 0};
			var DevTerminal = { id:"DeviceTerminal", name:"Terminal", image:"" + staticlink + "production/images/Terminal.png", height:54, width:62, count: 0};

			var Devices = [];
			var DeviceTypes = [];
			
			DeviceTypes.push(DevRouter);
			DeviceTypes.push(DevSwitch);
			DeviceTypes.push(DevTerminal);
			
			var CabLan = { id:"CableLan", name:"LAN", image:"" + staticlink + "production/images/lan.png", height:54, width:62, count: 0};
			var CabWan = { id:"CableWan", name:"WAN", image:"" + staticlink + "production/images/wan.gif", height:54, width:62, count: 0};
			var CabConsole = { id:"CableConsole", name:"CONSOLE", image:"" + staticlink + "production/images/console.png", height:54, width:62, count: 0};
			
			var Cables = []; 
			var CableTypes = [];
			
			CableTypes.push(CabLan);
			CableTypes.push(CabWan);
			CableTypes.push(CabConsole);
			
			var ClickedCable = null;
			var CableChoice = "";
			
			var canvas = document.getElementById('Workspace');
			var context = canvas.getContext('2d');
			
			var counter=2;
			
			
			// TEMPORARY Ports
			var SwitchPorts = [];
			
			for(c=0;c<=4;c++){
				SwitchPorts[c] = "fa0/" + c;
			}
			
			var RouterPorts = [];
			RouterPorts[0] = "Console";
			RouterPorts[1] = "fa0/0";
			RouterPorts[2] = "fa0/1";
			
			for(c=0;c<=1;c++){
				RouterPorts[c+3] = "s0/0/" + c;
			}
			
			var TerminalPorts = [];
			TerminalPorts[0] = "fa0";
			// TEMPORARY Ports

			Content.height = window.innerHeight;
			Content.width = window.innerWidth;
			CnvsWorkspace.height = Content.height - 150;//500;
			CnvsWorkspace.width = Content.width - 37;//1000;
			Workspace.font="16px Calibri";
			Workspace.textAlign="center";

			var CnvsDimension = CnvsWorkspace.getBoundingClientRect();
			var MouseX = CnvsDimension.left;
			var MouseY = CnvsDimension.top;
			var DraggingDeviceNum = 0;
			var IsDragging = false;
			var DraggingDevice = null;
			var DraggingDevicePtX = 0;
			var DraggingDevicePtY = 0;
			var DraggingDevicePtXtwo = 0;
			var DraggingDevicePtYtwo = 0;
			
			var IsDropping = false;
			var DraggedDevice = null;
			var DraggedDevicePosX = 0;
			var DraggedDevicePosY = 0;
			
			CnvsWorkspace.onmousedown = EvtMouseDown;
			CnvsWorkspace.onmouseup = EvtMouseUp;
			// CnvsWorkspace.oncontextmenu = PortPicker;
			
			function AddToWorkspace(arg){
			
				var NewDeviceIcon = new Image();
				var RefDevice = DeviceTypes[SearchDeviceTypeIdFromElementId(arg.id)];
				RefDevice.count++;
				var TempDevice = JSON.parse(JSON.stringify(RefDevice));
				TempDevice.name = TempDevice.name + " " + RefDevice.count;
				NewDeviceIcon.src = TempDevice.image;
				var PosX = 0;
				var PosY = 0;
				NewDeviceIcon.onload = function(){
					Workspace.drawImage(NewDeviceIcon, PosX, PosY);
					Workspace.fillText(TempDevice.name, PosX + TempDevice.width / 2, PosY + TempDevice.height + 20);
				}
				var NewDevice = { object:NewDeviceIcon, x:PosX, y:PosY, height:TempDevice.height, width:TempDevice.width, name:TempDevice.name};
				
				Devices.push(NewDevice);
			}
			
			function remove(){
				
				if(LastTouchedDevice != null){
					Confirm.render("Are you sure you want to delete "+ Devices[LastTouchedDevice].name + "?","device");
				}
				else if(LastTouchedCable != null){
					Confirm.render("Are you sure you want to delete " + Cables[LastTouchedCable].name + "?","cable");
				}
				
			}
			
			function CheckForCables(mousex, mousey){
			
				var found;
				var slope;
				var stepone;
				var steptwo;
				var answer;
			
				var x;
				var y;
				
				found=-1;
				
				for(var nCtr = 0; nCtr < Cables.length && found < 0; nCtr++){
					
					slope= (Cables[nCtr].endpointy - Cables[nCtr].startpointy) / (Cables[nCtr].endpointx - Cables[nCtr].startpointx);
					
					x=Cables[nCtr].startpointx;
					y=Cables[nCtr].startpointy;
						
					// POINT SLOPE EQUATION: y - y1 = m(x-x1)
					stepone=y-mousey;
					steptwo=slope*(x-mousex);
					
					if(stepone < 0){
						stepone=stepone*(-1);
						steptwo=steptwo*(-1);
					}
					
					/* // For Checking
					console.log("Slope: " + slope);
					console.log("Stepone: " +stepone);
					console.log("Steptwo: " +steptwo);
					console.log("found: " + found);
					*/
					
					if(stepone>=steptwo){
						answer=stepone-steptwo;
					}
					else{
						answer=steptwo-stepone;
					}
					
					if(answer < 8){
						found=nCtr;
					}
						
				}
				if(found != -1){
					return found;
				}
				else
					return -1;
					
			}
			
			function SearchCableTypeIdFromElementId(ID){
				var found = false;
				var nCtr = 0;
				while(nCtr < CableTypes.length && found == false){
					if(CableTypes[nCtr].id == ID){
						found = true;
					} else {
						nCtr++;
					}
				}
				if(found)
					return nCtr;
				else
					return -1;
			}

			function SearchDeviceTypeIdFromElementId(ID){
				var found = false;
				var nCtr = 0;
				while(nCtr < DeviceTypes.length && found == false){
					if(DeviceTypes[nCtr].id == ID){
						found = true;
					} else {
						nCtr++;
					}
				}
				
				if(found)
					return nCtr;
				else
					return -1;
			}
			
			function SearchTopDeviceIdOnMousePosition(MouseX, MouseY){
				var found = false;
				var nCtr = Devices.length - 1;
				while(nCtr >= 0 && found == false){
					if(MouseX >= Devices[nCtr].x &&
						MouseX <= Devices[nCtr].x + Devices[nCtr].width &&
						MouseY >= Devices[nCtr].y &&
						MouseY <= Devices[nCtr].y + Devices[nCtr].height){
						found = true;
						DraggingDevicePtX = MouseX - Devices[nCtr].x;
						DraggingDevicePtY = MouseY - Devices[nCtr].y;
					} else {
						nCtr--;
						
					}
				}
				if(found)
					return nCtr;
				else
					return -1;
			}
			
			var LastTouched = "none"
			var LastTouchedDevice;
			var LastTouchedCable;
			function EvtMouseDown(arg){
				CnvsDimension = CnvsWorkspace.getBoundingClientRect();
				
				MouseX = arg.clientX - CnvsDimension.left;
				MouseY = arg.clientY - CnvsDimension.top;
					
				DraggingDevicePtX = 0;
				DraggingDevicePtY = 0;
				DraggingDeviceNum = SearchTopDeviceIdOnMousePosition(MouseX, MouseY);
				var isDevice= false;
				
				if(SearchTopDeviceIdOnMousePosition(MouseX, MouseY)== -1){
					counter=2;
					CableChoice="";	
					$(".custom-menu").hide(100);
					picked = null;
					LastTouchedDevice = null;
					LastTouchedCable  = null;
					
				}else{
					LastTouchedDevice = SearchTopDeviceIdOnMousePosition(MouseX, MouseY);
					LastTouchedCable = null;
					isDevice= true;
				}
				
				if((CheckForCables(MouseX,MouseY)!=-1) && (isDevice != true) ){
					LastTouchedDevice = null
					LastTouchedCable = CheckForCables(MouseX,MouseY);
					LastTouched = "cable";
				}
					
				if(DraggingDeviceNum != -1){
					IsDragging = true;
					
					CnvsWorkspace.onmousemove = EvtMouseMove;
				}
			}
			
			
		
			function EvtMouseUp(arg){
				if(IsDragging){
					IsDragging = false;
					DraggingDeviceNum = 0;
					CnvsWorkspace.onmousemove = null;
				}
			}

			function EvtMouseMove(arg){
				
				WorkspaceRemove();
			
				MouseX = arg.clientX - CnvsDimension.left;
				MouseY = arg.clientY - CnvsDimension.top;
				
				dragdevice = String(Devices[DraggingDeviceNum].name);
				dragdevicetype = dragdevice.substr(0,dragdevice.indexOf(' '));
				
				//console.log(dragdevice);
				
				var dragdevicex=MouseX-DraggingDevicePtX; 
				var dragdevicey=MouseY-DraggingDevicePtY;
				
				if(dragdevicex<0){
					dragdevicex=dragdevicex-dragdevicex+2;
				}
				if(dragdevicex>(canvas.width-65)){
					dragdevicex= dragdevicex-(dragdevicex-(canvas.width-65));
				}
				if(dragdevicey<0){
					dragdevicey=dragdevicey-dragdevicey+2;
				}
				if(dragdevicey>(canvas.height-Devices[DraggingDeviceNum].height-25)){
					dragdevicey=dragdevicey-(dragdevicey-(canvas.height-Devices[DraggingDeviceNum].height-25));
				}
				
				Devices[DraggingDeviceNum].x = dragdevicex;
				Devices[DraggingDeviceNum].y = dragdevicey;
				
				for(var nCtr = 0; nCtr < Cables.length; nCtr++){
					if(dragdevice == Cables[nCtr].startdevice){

						Cables[nCtr].startpointx=dragdevicex+ConnectAid(dragdevicetype,1);
						Cables[nCtr].startpointy=dragdevicey+ConnectAid(dragdevicetype,2);
					}
					else if(dragdevice == Cables[nCtr].enddevice){
						
						Cables[nCtr].endpointx =dragdevicex+ConnectAid(dragdevicetype,1);
						Cables[nCtr].endpointy =dragdevicey+ConnectAid(dragdevicetype,2);
					} 
				}
				counter=2;
				CableChoice="";
				WorkspaceRepaint();
			}

			function EvtOnDragStart(arg){
				DraggedDevice = arg;
				DraggedDevicePosX = event.clientX - DraggedDevice.getBoundingClientRect().left;
				DraggedDevicePosY = event.clientY - DraggedDevice.getBoundingClientRect().top;
				IsDropping = true;
			}
			
			function EvtOnClick(arg){
					
					ClickedCable = arg;
					
					var RefCable = CableTypes[SearchCableTypeIdFromElementId(arg.id)];
					var TempCable = JSON.parse(JSON.stringify(RefCable));
						
					if(TempCable.name == "LAN"){
					CableChoice="LAN";
					}
					else if(TempCable.name== "WAN"){
					CableChoice="WAN";
					}	
					else{
					CableChoice="CONSOLE";
					}
					// console.log(CableChoice); // <TO TRACE CABLE CHOSEN	
				}
				
			
			function ConnectAid(device,key){
			
				var aidx;
				var aidy;
				
				aidx=0;
				aidy=0;
				
				if(device=="Terminal"){
							aidx=31
							aidy=27
				} 
				else{
							aidx=32;
							aidy=19;
				}  
				
					if(key==1)
						return aidx;
					else
						return aidy;		
			}

			var MouseXTwo = CnvsDimension.left;
			var MouseYTwo = CnvsDimension.top;
			var tempStartPort = "";
			var tempEndPort = "";
			var picked=null;
			
			function PortPicker(deviceType, deviceId){
				
				deviceType = (Devices[deviceId].name).substring(0,(Devices[deviceId].name).indexOf(' '));	
				var options="";
				$("#menu ul").empty();
				
				if(deviceType=="Router"){
						for (var i = 0; i < RouterPorts.length; i++){
						   options += '<li value=" ' + RouterPorts[i]+ '">' + RouterPorts[i] + '</li>';
						} 
				}
				else if(deviceType=="Switch"){
						for (var i = 0; i < SwitchPorts.length; i++){
							   options += '<li value=" ' + SwitchPorts[i]+ '">' + SwitchPorts[i] + '</li>';
							} 	
				}
				else{
						for (var i = 0; i < TerminalPorts.length; i++){
							   options += '<li value=" ' + TerminalPorts[i]+ '">' + TerminalPorts[i] + '</li>';
							} 	
				}
				
				$("#menu ul").append(options);
			
				
				$(".custom-menu").finish().toggle(100).
					css({
						top: MouseY + "px",
						left: MouseX+10 + "px"
					});	
					
				$(".custom-menu li").click(function(){
					
					var $this = $(this);
					var selKeyVal = $this.attr("value");
					picked = $this.text();

					
					if(counter%2!=0 && CableChoice!="" &&  SearchTopDeviceIdOnMousePosition(MouseX, MouseY) >= 0 && SearchTopDeviceIdOnMousePosition(MouseXTwo, MouseYTwo) >= 0  && SearchTopDeviceIdOnMousePosition(MouseX, MouseY) != SearchTopDeviceIdOnMousePosition(MouseXTwo, MouseYTwo)){
						
					tempEndPort = picked;
						
					var firstx;
					var firsty;
					var firstdevice;
					
					firstdevice = String(Devices[SearchTopDeviceIdOnMousePosition(MouseXTwo,MouseYTwo)].name)
					firstdevice = firstdevice.substr(0,firstdevice.indexOf(' '));
					
					firstx=MouseXTwo-DraggingDevicePtX+ConnectAid(firstdevice,1);
					firsty=MouseYTwo-DraggingDevicePtY+ConnectAid(firstdevice,2);
					
				    context.beginPath();
					context.moveTo(firstx, firsty);
					context.lineWidth=5;
					context.lineCap = "round";
					 
					var secondx;
					var secondy;
					var seconddevice;
						
					seconddevice = String(Devices[SearchTopDeviceIdOnMousePosition(MouseX,MouseY)].name)
					seconddevice = seconddevice.substr(0,seconddevice.indexOf(' '));
				
					secondx=MouseX-DraggingDevicePtX+ConnectAid(seconddevice,1);
					secondy=MouseY-DraggingDevicePtY+ConnectAid(seconddevice,2);
			
					 if(CableChoice == "LAN"){
					 
						context.strokeStyle = '#000000';	
						context.lineTo(secondx, secondy);
						context.stroke();
					 }
					 else if(CableChoice == "WAN"){
								
								var startX = firstx;
								var startY = firsty;
								endX = secondx;
								endY = secondy;
								var DifX = 0;
								var DifY = 0;
								
								
								if(endX > startX)
									DifX = endX - startX
								else
									DifX = startX - endX
								if(endY > startY)
									DifY = endY - startY
								else
									DifY = startY - endY

								if(startX - endX > 0)
									DifX = -DifX
								if(startY - endY > 0)
									DifY = -DifY

								context.strokeStyle = '#ff0000';
								
								
							// TEST
								
								var slope=0;
								slope = DifY/DifX;
								
								
								if( (startX < endX) && (startY <= endY) ){
									
										Workspace.lineTo(startX + DifX / 2 + 10, startY + DifY / 2 + 10);	
										Workspace.lineTo(startX + DifX / 2 - 10, startY + DifY / 2 - 10);
									
								}else if( (startX > endX) && (startY >= endY) ){
									
										Workspace.lineTo(startX + DifX / 2 - 10, startY + DifY / 2 - 10);	
										Workspace.lineTo(startX + DifX / 2 + 10, startY + DifY / 2 + 10);
									
								}else if( (startX >= endX) && (startY < endY) ){
										Workspace.lineTo(startX + DifX / 2 - 10, startY + DifY / 2 + 10);	
										Workspace.lineTo(startX + DifX / 2 + 10, startY + DifY / 2 - 10);
									
								}else if( (startX <= endX) && (startY > endY) ){
									
										Workspace.lineTo(startX + DifX / 2 + 10, startY + DifY / 2 + 10);	
										Workspace.lineTo(startX + DifX / 2 - 10, startY + DifY / 2 + 10);
								}
									
								
								Workspace.lineTo(secondx, secondy);
								Workspace.stroke();
					 }
					 else if(CableChoice == "CONSOLE"){
						context.strokeStyle = '#5bfcff';	
						context.bezierCurveTo(firstx,firsty-20,secondx,secondy-20,secondx,secondy);
						context.stroke();
					 
					 }
					 
					 WorkspaceRepaint();
					 var firstd = SearchTopDeviceIdOnMousePosition(MouseXTwo,MouseYTwo);
					 var secondd = SearchTopDeviceIdOnMousePosition(MouseX,MouseY);
					 
					  addCable(firstx,firsty,secondx,secondy,firstd,secondd, tempStartPort, tempEndPort);
					 
					console.log(Cables[0].s)
					// console.log("counter: " +counter);
					//	 counter++;
						
					}
					else{
						tempStartPort = picked;
					}
					
					counter++;
						
					$(".custom-menu").hide(100);
				  });	
				  
			}
			
			function EvtOnDraw(arg){
			
				  if(counter%2!=0 && CableChoice!="" &&  SearchTopDeviceIdOnMousePosition(MouseX, MouseY) >= 0 && SearchTopDeviceIdOnMousePosition(MouseXTwo, MouseYTwo) >= 0  && SearchTopDeviceIdOnMousePosition(MouseX, MouseY) != SearchTopDeviceIdOnMousePosition(MouseXTwo, MouseYTwo)){
				  
					PortPicker(Devices[SearchTopDeviceIdOnMousePosition(MouseX,MouseY)].name, SearchTopDeviceIdOnMousePosition(MouseX,MouseY));
				}
				else if(SearchTopDeviceIdOnMousePosition(MouseX, MouseY) >= 0 && CableChoice!=""){
				  
				    MouseXTwo = MouseX;
					MouseYTwo = MouseY;
					
					PortPicker(Devices[SearchTopDeviceIdOnMousePosition(MouseX,MouseY)].name, SearchTopDeviceIdOnMousePosition(MouseX,MouseY));
				  }
				  
				  
			}
			
			function addCable(firstxpoint, firstypoint, secondxpoint, secondypoint,firstdevice,seconddevice,firstport,secondport){
					var RefCable = CableTypes[SearchCableTypeIdFromElementId(ClickedCable.id)]
					RefCable.count++;
					
					var TempCable = JSON.parse(JSON.stringify(RefCable));
					TempCable.name = TempCable.name + " " + RefCable.count;
					
					var NewCable = {startpointx: firstxpoint, startpointy: firstypoint, endpointx: secondxpoint, endpointy: secondypoint, startdevice: Devices[firstdevice].name, enddevice: Devices[seconddevice].name, startport:firstport, endport:secondport, name:TempCable.name};
					Cables.push(NewCable);
					
					
				
			}
				
			function EvtOnDrop(arg) {
				arg.preventDefault();
				if(IsDropping == true){
					IsDropping = false;
					var NewDeviceIcon = new Image();
					var RefDevice = DeviceTypes[SearchDeviceTypeIdFromElementId(DraggedDevice.id)];
					RefDevice.count++;
					var TempDevice = JSON.parse(JSON.stringify(RefDevice));
					TempDevice.name = TempDevice.name + " " + RefDevice.count;
					NewDeviceIcon.src = TempDevice.image;
					var PosX = arg.clientX - CnvsDimension.left - DraggedDevicePosX;
					var PosY = arg.clientY - CnvsDimension.top - DraggedDevicePosY;
					
					
					
					if(PosX<0){
						PosX=PosX-PosX+2;
					}
					if(PosX>(canvas.width-65)){
						PosX= PosX-(PosX-(canvas.width-65));
					}
					if(PosY<0){
						PosY=PosY-PosY+2;
					}
					if(PosY>(canvas.height-TempDevice.height-25)){
						PosY=PosY-(PosY-(canvas.height-TempDevice.height-25));
					} 
					
					NewDeviceIcon.onload = function(){
						Workspace.drawImage(NewDeviceIcon, PosX, PosY);
						Workspace.fillText(TempDevice.name, PosX + TempDevice.width / 2, PosY + TempDevice.height + 20);
					}
					
					var NewDevice = { object:NewDeviceIcon, x:PosX, y:PosY, height:TempDevice.height, width:TempDevice.width, name:TempDevice.name};
					Devices.push(NewDevice);
					
					
					CableChoice="";
					counter=2;
					
					//console.log("checker: " + MouseX +","+MouseY);  // << FOR CHECKING COORDINATES
					
				}
					
			}
			

			function EvtOnDragOver(arg){
				arg.preventDefault();
			}

			function PrintAllDevices(arg){
				
				Output.innerHTML = "";
				for(var nCtr = 0; nCtr < Devices.length; nCtr++){
					Output.innerHTML += "Device " + (nCtr + 1) + " is " + Devices[nCtr].name + "<br>";
				}
				
				for(var nCtr = 0; nCtr < Cables.length; nCtr++){
					Output.innerHTML += "Cable " + (nCtr + 1) + " is " + Cables[nCtr].name + "<br>";
				}
				
			}

			function WorkspaceRemove(arg){
				
				for(var nCtr = 0; nCtr < Devices.length; nCtr++){
					Workspace.clearRect(Devices[nCtr].x - 1, Devices[nCtr].y - 1, Devices[nCtr].width + 2, Devices[nCtr].height + 2);
					Workspace.clearRect(Devices[nCtr].x - 20, Devices[nCtr].y + Devices[nCtr].height, 120, 40);
				}
				for(var nCtr = 0; nCtr < Cables.length; nCtr++){
				
					 context.beginPath();
					 context.moveTo(Cables[nCtr].startpointx, Cables[nCtr].startpointy);
					 context.lineWidth=10;
					 context.lineCap = "round";
					 context.strokeStyle = '#FFFFFF';
					 
					 if((Cables[nCtr].name).substr(0,3) == "LAN"){
							
						context.lineTo(Cables[nCtr].endpointx, Cables[nCtr].endpointy);
						context.stroke();
					 }
					 else if((Cables[nCtr].name).substr(0,3) == "WAN"){
								var startX = Cables[nCtr].startpointx;
								var startY = Cables[nCtr].startpointy;
							
								endX = Cables[nCtr].endpointx;
								endY = Cables[nCtr].endpointy;

								var DifX = 0;
								var DifY = 0;
								if(endX > startX)
									DifX = endX - startX
								else
									DifX = startX - endX
								if(endY > startY)
									DifY = endY - startY
								else
									DifY = startY - endY

								if(startX - endX > 0)
									DifX = -DifX
								if(startY - endY > 0)
									DifY = -DifY

								// TEST
								
								var slope=0;
								slope = DifY/DifX;
								
								if( (startX < endX) && (startY <= endY) ){
									
										Workspace.lineTo(startX + DifX / 2 + 10, startY + DifY / 2 + 10);	
										Workspace.lineTo(startX + DifX / 2 - 10, startY + DifY / 2 - 10);
									
								}else if( (startX > endX) && (startY >= endY) ){
									
									
										Workspace.lineTo(startX + DifX / 2 - 10, startY + DifY / 2 - 10);	
										Workspace.lineTo(startX + DifX / 2 + 10, startY + DifY / 2 + 10);
									
								}else if( (startX >= endX) && (startY < endY) ){
										Workspace.lineTo(startX + DifX / 2 - 10, startY + DifY / 2 + 10);	
										Workspace.lineTo(startX + DifX / 2 + 10, startY + DifY / 2 - 10);
									
								}else if( (startX <= endX) && (startY > endY) ){
									
										Workspace.lineTo(startX + DifX / 2 + 10, startY + DifY / 2 + 10);	
										Workspace.lineTo(startX + DifX / 2 - 10, startY + DifY / 2 + 10);
									
								}
									
								
								Workspace.lineTo(Cables[nCtr].endpointx, Cables[nCtr].endpointy);
								Workspace.stroke();
					 }
					else{	
						context.bezierCurveTo(Cables[nCtr].startpointx,Cables[nCtr].startpointy-20,Cables[nCtr].endpointx,Cables[nCtr].endpointy-20,Cables[nCtr].endpointx,Cables[nCtr].endpointy);
						context.stroke();
					}
				}
				
			}

			function WorkspaceRepaint(arg){
			
				for(var nCtr = 0; nCtr < Cables.length; nCtr++){
					 context.beginPath();
					 context.moveTo(Cables[nCtr].startpointx, Cables[nCtr].startpointy);
					 context.lineWidth=5;
					 context.lineCap = "round";
					 
					 if((Cables[nCtr].name).substr(0,3) == "LAN"){
						context.strokeStyle = '#000000';	
						context.lineTo(Cables[nCtr].endpointx, Cables[nCtr].endpointy);
						context.stroke();
					 }
					 else if((Cables[nCtr].name).substr(0,3) == "WAN"){
						context.strokeStyle = '#ff0000';	
						
						var startX = Cables[nCtr].startpointx;
						var startY = Cables[nCtr].startpointy;
							
						endX = Cables[nCtr].endpointx;
						endY = Cables[nCtr].endpointy;

						var DifX = 0;
						var DifY = 0;
						if(endX > startX)
							DifX = endX - startX
						else
							DifX = startX - endX
						if(endY > startY)								
							DifY = endY - startY
						else
							DifY = startY - endY

						if(startX - endX > 0)
							DifX = -DifX
						if(startY - endY > 0)
							DifY = -DifY

							// TEST
								
								
								var slope=0;
								slope = DifY/DifX;
								
								console.log("slope: " + slope);
								
								if( (startX < endX) && (startY <= endY) ){
										Workspace.lineTo(startX + DifX / 2 + 10, startY + DifY / 2 + 10);	
										Workspace.lineTo(startX + DifX / 2 - 10, startY + DifY / 2 - 10);
										console.log("Q1");
									
								}else if( (startX > endX) && (startY >= endY) ){
										Workspace.lineTo(startX + DifX / 2 - 10, startY + DifY / 2 - 10);	
										Workspace.lineTo(startX + DifX / 2 + 10, startY + DifY / 2 + 10);
										console.log("Q2");
									
								}else if( (startX >= endX) && (startY < endY) ){
										Workspace.lineTo(startX + DifX / 2 - 10, startY + DifY / 2 + 10);	
										Workspace.lineTo(startX + DifX / 2 + 10, startY + DifY / 2 - 10);
										console.log("Q3");
									
								}else if( (startX <= endX) && (startY > endY) ){
									
										Workspace.lineTo(startX + DifX / 2 + 10, startY + DifY / 2 + 10);	
										Workspace.lineTo(startX + DifX / 2 - 10, startY + DifY / 2 + 10);
										console.log("Q4");
									
								}
									
								
						Workspace.lineTo(Cables[nCtr].endpointx, Cables[nCtr].endpointy);
						Workspace.stroke();
					 }
					 else{
						context.strokeStyle = '#5bfcff';	
						context.bezierCurveTo(Cables[nCtr].startpointx,Cables[nCtr].startpointy-20,Cables[nCtr].endpointx,Cables[nCtr].endpointy-20,Cables[nCtr].endpointx,Cables[nCtr].endpointy);
						context.stroke();
					 }	
				}
			
				for(var nCtr = 0; nCtr < Devices.length; nCtr++){
					Workspace.drawImage(Devices[nCtr].object, Devices[nCtr].x, Devices[nCtr].y);
					Workspace.fillText(Devices[nCtr].name, Devices[nCtr].x + Devices[nCtr].width / 2, Devices[nCtr].y + Devices[nCtr].height + 20);
				}
				
			}
			
			
			// PROMPT PROMPT PROMPT PROMPT PROMPT PROMPT 
			
			function CustomConfirm(){
				
				this.render = function(dialog,deviceType){
					
				var winW = window.innerWidth;
				var winH = window.innerHeight;
				var dialogoverlay = document.getElementById('dialogoverlay');
				var dialogbox = document.getElementById('dialogbox');
				dialogoverlay.style.display = "block";
				dialogoverlay.style.height = winH+"px";
				dialogbox.style.left = (winW/2) - (550 * .5)+"px";
				dialogbox.style.top = "100px";
				dialogbox.style.display = "block";
				
				document.getElementById('dialogboxhead').innerHTML = "Warning"; 
				document.getElementById('dialogboxbody').innerHTML = dialog;
				document.getElementById('dialogboxfoot').innerHTML = '<button onclick="Confirm.yes(\''+deviceType+'\')">Yes</button> <button onclick="Confirm.no()">No</button>';
				
				}
				this.no = function(){
					document.getElementById('dialogbox').style.display = "none";
					document.getElementById('dialogoverlay').style.display = "none";
					
				}
				this.yes = function(deviceType){
				
					if(deviceType=="device"){
						
						for(var nCtr=0; nCtr < Cables.length; nCtr++){
							
							if(Cables[nCtr].startdevice == Devices[LastTouchedDevice].name || Cables[nCtr].enddevice == Devices[LastTouchedDevice].name){
								WorkspaceRemove();
								Cables.splice(nCtr,1);		
								WorkspaceRepaint();
								nCtr--;
							}								
						} 
						
						WorkspaceRemove();
						Devices.splice(LastTouchedDevice, 1);
						WorkspaceRepaint();
					}
					else{
						WorkspaceRemove();
						Cables.splice(LastTouchedCable,1);
						WorkspaceRepaint();
					}
					document.getElementById('dialogbox').style.display = "none";
					document.getElementById('dialogoverlay').style.display = "none";
					
				}
			}
			var Confirm = new CustomConfirm();
	</script>
	<!-- Canvass Loader -->		
	{% for device in devices %}
	<script>
		var loaddeviceType;
		var loaddeviceImage = new Image();
		var loaddeviceName = "{{ device.deviceName }}";
		var loaddeviceHeight;
		var loaddeviceWidth;
		var loadPosX = {{ device.xCord }};
		var loadPosY = {{ device.yCord}};
		if(loaddeviceName.includes("Router")){
			loaddeviceType = 0;
			loaddeviceImage.src = "{% static '/production/images/Router.png' %}";
			loaddeviceHeight = 38;
			loaddeviceWidth = 64;
		} else if(loaddeviceName.includes("Switch")){
			loaddeviceType = 1;
			loaddeviceImage.src = "{% static '/production/images/Switch.png' %}";
			loaddeviceHeight = 38;
			loaddeviceWidth = 64;
		} else if(loaddeviceName.includes("Terminal")){
			loaddeviceType = 2;
			loaddeviceImage.src = "{% static '/production/images/Terminal.png' %}";
			loaddeviceHeight = 54;
			loaddeviceWidth = 62;
		}
		
		Workspace.drawImage(loaddeviceImage, loadPosX, loadPosY);
		Workspace.fillText(loaddeviceName, loadPosX + loaddeviceWidth / 2, loadPosY + loaddeviceHeight + 20);
		
		
	</script>
	{% endfor %}
	
  </body>
</html>
